2025-08-28T16:48:20.733589Z INFO     vrl_testing_loop_clean:_setup_logging:152 - VRL Testing Pipeline logging initialized
2025-08-28T16:48:20.733735Z INFO     vrl_testing_loop_clean:_setup_logging:153 - Log file: logs/vrl_pipeline_20250828_164820.log
2025-08-28T16:48:20.733804Z INFO     vrl_testing_loop_clean:_setup_logging:154 - Sample file: samples/cisco-asa.ndjson
2025-08-28T16:48:20.733856Z INFO     vrl_testing_loop_clean:_setup_logging:155 - Output directory: samples-parsed
2025-08-28T16:48:20.733902Z INFO     vrl_testing_loop_clean:_setup_logging:156 - External configs: external
2025-08-28T16:48:20.734215Z INFO     vrl_testing_loop_clean:_setup_logging:157 - Loaded configs: ['vector_vrl_prompt', 'parser_prompts', 'type_maps']
2025-08-28T16:48:20.735895Z INFO     vrl_testing_loop_clean:__init__:113 - Benchmarking local CPU performance...
2025-08-28T16:48:20.740031Z INFO     vrl_testing_loop_clean:__init__:115 - CPU benchmark multiplier: 10.00x
2025-08-28T16:48:20.740165Z INFO     vrl_testing_loop_clean:__init__:118 - Measuring Vector CLI startup time...
2025-08-28T16:48:21.242159Z INFO     vrl_testing_loop_clean:__init__:120 - Vector startup time: 0.50s
2025-08-28T16:48:21.242336Z INFO     vrl_testing_loop_clean:_log_external_configs_summary:1067 - üìã EXTERNAL CONFIGS SUMMARY (K8s deployed):
2025-08-28T16:48:21.242456Z INFO     vrl_testing_loop_clean:_log_external_configs_summary:1074 -    üéØ vector-vrl-system.md: v1.3.0...
2025-08-28T16:48:21.242528Z INFO     vrl_testing_loop_clean:_log_external_configs_summary:1075 -       Contains: Performance tiers, string ops, Vector 0.49.0 config
2025-08-28T16:48:21.242574Z INFO     vrl_testing_loop_clean:_log_external_configs_summary:1079 -    üîß parser-system-prompts.md: 8161 chars of project overrides
2025-08-28T16:48:21.242640Z INFO     vrl_testing_loop_clean:_log_external_configs_summary:1085 -    üìä type_maps.csv: 24 field mappings for product evolution
2025-08-28T16:48:21.242688Z INFO     vrl_testing_loop_clean:_log_external_configs_summary:1087 -    üí° These configs are retained for persistent LLM context
2025-08-28T16:48:22.012526Z INFO     vrl_testing_loop_clean:run_automated_llm_generation:1201 - ü§ñ Starting automated LLM VRL generation
2025-08-28T16:48:22.013215Z INFO     vrl_testing_loop_clean:run_automated_llm_generation:1202 - Provider: anthropic, Max iterations: 2
2025-08-28T16:48:22.048234Z INFO     llm_iterative_session:_init_anthropic:433 - üîç Auto-detecting latest Anthropic model...
2025-08-28T16:48:22.048460Z INFO     llm_iterative_session:_detect_best_anthropic_model:140 - üîç Querying Anthropic API for available models...
2025-08-28T16:48:22.359185Z INFO     llm_iterative_session:_detect_best_anthropic_model:166 - Available Anthropic models: ['claude-opus-4-1-20250805', 'claude-opus-4-20250514', 'claude-sonnet-4-20250514', 'claude-3-7-sonnet-20250219', 'claude-3-5-sonnet-20241022']...
2025-08-28T16:48:22.359406Z INFO     llm_iterative_session:_detect_best_anthropic_model:187 - ‚úÖ Selected best Opus model: claude-opus-4-1-20250805
2025-08-28T16:48:22.360895Z INFO     llm_iterative_session:_init_anthropic:435 - üéØ Selected model: claude-opus-4-1-20250805
2025-08-28T16:48:22.709510Z INFO     llm_iterative_session:__init__:124 - ü§ñ Iterative LLM Session initialized
2025-08-28T16:48:22.710471Z INFO     llm_iterative_session:__init__:125 -    Provider: anthropic
2025-08-28T16:48:22.710800Z INFO     llm_iterative_session:__init__:126 -    Model: claude-opus-4-1-20250805
2025-08-28T16:48:22.711203Z INFO     llm_iterative_session:__init__:127 -    Session: llm_session_20250828_164822
2025-08-28T16:48:22.711573Z INFO     llm_iterative_session:__init__:131 - üìä Model Capabilities:
2025-08-28T16:48:22.712106Z INFO     llm_iterative_session:__init__:132 -    Context Window: 200,000 tokens
2025-08-28T16:48:22.712266Z INFO     llm_iterative_session:__init__:133 -    Max Input: 200,000 tokens
2025-08-28T16:48:22.712341Z INFO     llm_iterative_session:__init__:134 -    Max Output: 4,096 tokens
2025-08-28T16:48:22.712402Z INFO     llm_iterative_session:__init__:136 -    Cost: $0.000015/input, $0.000075/output per token
2025-08-28T16:48:22.712484Z INFO     vrl_testing_loop_clean:run_automated_llm_generation:1210 - üí∞ Cost tracking: $0.000015/input token, $0.000075/output token
2025-08-28T16:48:22.712577Z INFO     llm_iterative_session:generate_initial_vrl:679 - üöÄ Starting VRL generation session (iteration 1)
2025-08-28T16:48:22.713434Z DEBUG    llm_iterative_session:_save_conversation:1221 - üíæ Saved user message to .tmp/llm_sessions/llm_session_20250828_164822/iter1_user.txt
2025-08-28T16:48:22.713533Z INFO     llm_iterative_session:_call_llm:946 - üì§ Calling anthropic API
2025-08-28T16:48:22.713601Z DEBUG    llm_iterative_session:_call_llm:947 -    Prompt length: 36174 chars
2025-08-28T16:48:36.444984Z DEBUG    llm_iterative_session:_call_anthropic:1092 - Model claude-opus-4-1-20250805 failed: Error code: 529 - {'type': 'error', 'error': {'type': 'overloaded_error', 'message': 'Overloaded'}, 'request_id': None}
2025-08-28T16:49:28.394070Z WARNING  llm_iterative_session:_call_anthropic:1080 - Fell back from claude-opus-4-1-20250805 to claude-opus-4-20250514
2025-08-28T16:49:28.394304Z INFO     llm_iterative_session:_call_llm:962 - üì• Response received in 65.7s (8285 chars)
2025-08-28T16:49:28.394635Z DEBUG    llm_iterative_session:_save_conversation:1221 - üíæ Saved assistant message to .tmp/llm_sessions/llm_session_20250828_164822/iter1_assistant.txt
2025-08-28T16:49:28.394697Z INFO     vrl_testing_loop_clean:run_automated_llm_generation:1224 - Testing iteration 1
2025-08-28T16:49:28.394751Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - ============================================================
2025-08-28T16:49:28.394794Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - TESTING LLM-GENERATED VRL (Iteration 1)
2025-08-28T16:49:28.394834Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - ============================================================
2025-08-28T16:49:28.394882Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - 
1. TESTING WITH PyVRL
2025-08-28T16:49:28.395189Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - ----------------------------------------
2025-08-28T16:49:28.397479Z ERROR    vrl_testing_loop_clean:test_with_pyvrl:311 - ‚úó PyVRL validation failed: 
error[E103]: unhandled fallible assignment
   ‚îå‚îÄ :40:16
   ‚îÇ
40 ‚îÇ   code_parts = split(asa_content, ":")
   ‚îÇ   ------------ ^^^^^^^^^^^^^^^^^^^^^^^
   ‚îÇ   ‚îÇ            ‚îÇ
   ‚îÇ   ‚îÇ            this expression is fallible because at least one argument's type cannot be verified to be valid
   ‚îÇ   ‚îÇ            update the expression to be infallible by adding a `!`: `split!(asa_content, ":")`
   ‚îÇ   ‚îÇ            `asa_content` argument type is `string or null` and this function expected a parameter `value` of type `string`
   ‚îÇ   or change this to an infallible assignment:
   ‚îÇ   code_parts, err = split(asa_content, ":")
   ‚îÇ
   = see documentation about error handling at https://errors.vrl.dev/#handling
   = see functions characteristics documentation at https://vrl.dev/expressions/#function-call-characteristics
   = learn more about error code 103 at https://errors.vrl.dev/103
   = see language documentation at https://vrl.dev
   = try your code in the VRL REPL, learn more at https://vrl.dev/examples

2025-08-28T16:49:28.397605Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - ‚ùå LLM VRL iteration 1 failed PyVRL validation
2025-08-28T16:49:28.397668Z INFO     llm_iterative_session:iterate_with_feedback:713 - üîÑ Iterating VRL generation (iteration 2)
2025-08-28T16:49:28.397939Z DEBUG    llm_iterative_session:_save_conversation:1221 - üíæ Saved user message to .tmp/llm_sessions/llm_session_20250828_164822/iter2_user.txt
2025-08-28T16:49:28.398001Z DEBUG    llm_iterative_session:_call_llm:943 - Adding 1.4s delay for iteration 2 to avoid rate limits
2025-08-28T16:49:29.798152Z INFO     llm_iterative_session:_call_llm:946 - üì§ Calling anthropic API
2025-08-28T16:49:29.798403Z DEBUG    llm_iterative_session:_call_llm:947 -    Prompt length: 829 chars
2025-08-28T16:50:21.195304Z INFO     llm_iterative_session:_call_llm:962 - üì• Response received in 51.4s (8772 chars)
2025-08-28T16:50:21.199156Z DEBUG    llm_iterative_session:_save_conversation:1221 - üíæ Saved assistant message to .tmp/llm_sessions/llm_session_20250828_164822/iter2_assistant.txt
2025-08-28T16:50:21.199310Z INFO     vrl_testing_loop_clean:run_automated_llm_generation:1224 - Testing iteration 2
2025-08-28T16:50:21.199402Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - ============================================================
2025-08-28T16:50:21.199454Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - TESTING LLM-GENERATED VRL (Iteration 2)
2025-08-28T16:50:21.199499Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - ============================================================
2025-08-28T16:50:21.199551Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - 
1. TESTING WITH PyVRL
2025-08-28T16:50:21.199607Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - ----------------------------------------
2025-08-28T16:50:21.251242Z ERROR    vrl_testing_loop_clean:test_with_pyvrl:311 - ‚úó PyVRL validation failed: remap failure: function call error for "string" at (1047:1060): expected string, got null
2025-08-28T16:50:21.251911Z INFO     vrl_testing_loop_clean:_log_with_timestamp:1111 - ‚ùå LLM VRL iteration 2 failed PyVRL validation
2025-08-28T16:50:21.252004Z WARNING  vrl_testing_loop_clean:run_automated_llm_generation:1266 - Failed to generate valid VRL after 2 iterations
2025-08-28T16:50:21.252066Z INFO     llm_iterative_session:log_cost_summary:1330 - üí∞ SESSION COST SUMMARY:
2025-08-28T16:50:21.252125Z INFO     llm_iterative_session:log_cost_summary:1331 -    Estimated cost: $0.4586
2025-08-28T16:50:21.252167Z INFO     llm_iterative_session:log_cost_summary:1332 -    Total tokens: ~13,514
2025-08-28T16:50:21.252205Z INFO     llm_iterative_session:log_cost_summary:1333 -    Iterations: 2
2025-08-28T16:50:21.252241Z INFO     llm_iterative_session:log_cost_summary:1334 -    Model: claude-opus-4-20250514
2025-08-28T16:50:21.252288Z WARNING  llm_iterative_session:log_cost_summary:1338 -    ‚ÑπÔ∏è  Anthropic doesn't provide a public credits API. Check console.anthropic.com for actual balance.
